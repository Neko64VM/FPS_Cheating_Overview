# 技術的仕様
現在主流となっているオートエイムやウォールハックといった機能を提供する一般的なチートは、基本的にゲームのメモリに対して読み取りや書き込みを行うことで動作しておりこれらも大きく2つの手法に分かれている。

## 内部チート
ゲームのプロセスに不正なDLLを挿入し、その内部でチートを実行する。  
ゲーム内関数のフックや呼び出しが可能である為外部チートと比べて比較的高度なことが可能であると同時に外部チートよりも高いパフォーマンスを発揮することができる。

## 外部チート
外部チートは、ゲームとは別の独立したプロセスとして動作するチートである。  
大まかに以下の4つに分類される。  

* ユーザーモード（Ring-3）
* カーネルモード（Ring-0）
* EFI
* DMA

どの領域からメモリを読み書きするかが大きな違い。  
ESP等のレンダリングは、基本的にゲームの上に透明なウィンドウを配置してそこにESPやメニュー等のコンテンツをレンダリングする。  
また、既存の正規のオーバーレイウィンドウを乗っ取りそこにレンダリングを行うものも存在する。

### EFI
正直詳しくは調べてはいないが、OSが起動する前にEFI空間に読み込ませてそこからメモリを読み取る。

### DMA (Direct Memory Access) について
DMAとはその名の通り、メモリに直接アクセスしてそこから必要なデータを読み取りチートを動作させる手法。

ゲームを実行するPCに専用のPCIディバイスを取り付け、2台目のPCで読み取ったデータをESPや2Dレーダーとして処理するものが主流である。  
DMAに使用するPCIディバイス（以下DMAカード）自体は数万円程度の価格で販売されており、2台目のPCも用意することを考えると初期投資にそれなりの費用が必要である。  
ただし、DMAカードのファームウェアを正規のNICやサウンドカード、キャプチャーボードのようなディバイスに偽装することによりアンチチートの検出から逃れることが可能とされており、他のチートと比べると現段階では比較的安全性が高い傾向にある。

#### ToDo
ここの画像用意する

ゲームを動かすPC①のRAM上からDMAカードで対象となる領域を読み取り、PC②でDMAカードから送られてくる情報を視覚化する。  
画像の場合、Map Radarと呼ばれるものを使用している。  

#### KVM-DMA
KVM上で動作する仮想マシン（VM）のメモリをホスト側から読み取るものであり、DMAの一種である。    
この手法を利用するにあたり、LinuxやKVM/QEMUといった前提知識に加えGPUパススルー、対応するチートが販売されている訳も無いのでチートを自作できる能力 といった比較的高度な知識が要求される為、導入のハードルが高い。  
また、KVM-DMAに関しては仕様上どのようなアンチチートでも検出が極めて困難であるが、セットアップが煩雑な上に根本的にVMでのプレイを禁止する対策を行うことが非常に有効な対策となる為、脅威としてはかなり限定的であると思われる。

## 各種機能の実装
### ESP
1. 敵のVector3 (X, Y, Z)座標を取得
2. 敵の座標データを、画面上の座標 Vector2 (X, Y) に変換。WorldToScreenという。
3. 変換後の画面座標にESP BoxやHP、距離 名前等のやつをレンダリング。

### AimBot
#### メモリに書き込むやつ
1. 敵のVector3 (X, Y, Z)座標を取得
2. どの程度プレイヤーの視点を動かせば敵にエイムが合うかを計算
3. 算出された値をプレイヤーの視点情報を格納するアドレスに書き込む 

ゲームエンジンによるので詳しくは割愛するが、SilentAimも似たような感じ。  

#### マウスベースのやつ
1. 敵のVector3 (X, Y, Z)座標を取得
2. 敵の座標データを、画面上の座標 Vector2 (X, Y) に変換。
3. mouse_event / SendInput等の関数を用いてそこにマウスを動かす。
